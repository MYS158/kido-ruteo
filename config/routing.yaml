routing:
  algoritmo: shortest_path           # Selecciona el motor principal de ruteo
  weight: weight                     # Atributo de peso para routing ("weight", "length", "time")
  velocidad_default: 50              # km/h cuando no hay velocidad específica
  max_k_routes: 3                    # Solo aplica si usas k_shortest_path
  ponderadores:                      # Pesos de la función de costo
    tiempo: 1.0
    distancia: 0.0
    costo: 0.0
  restricciones:
    debe_pasar_por_checkpoint: true
    permitir_tolvas: false
    permitir_no_pavimentado: false
    penalizacion_checkpoint_seg: 120 # Penalización si no pasa por checkpoint requerido
  checkpoint:
    mode: auto                       # auto | manual
    percent_lower: 0.40              # Percentil inferior para auto checkpoint
    percent_upper: 0.60              # Percentil superior para auto checkpoint
  output_dir: data/processed/routing # Directorio para resultados

network:
  directory: data/network            # Directorio con edges.gpkg, nodes.gpkg
  nodos: data/raw/network/nodes.gpkg
  arcos: data/raw/network/edges.gpkg
  centroides: data/network/centroids.gpkg
  geometrias_aux: data/raw/network/auxiliary.gpkg

centroids:
  method: degree                     # degree | betweenness | closeness | eigenvector
  recompute: false                   # true = forzar recalculo aunque exista centroids.gpkg
  output: data/network/centroids.gpkg

manual_selection:
  enabled: true
  file: data/raw/inputs/manual_pair_checkpoints.csv
  matching_keys: ["origin_zone_id", "destination_zone_id"]

mc:                              # Matriz de caminos (MC)  shortest path all-to-all
  habilitado: true
  sample_pct: 1.0                # 1.0 = usar todos los pares OD
  campos_salida: ["origen", "destino", "tiempo_seg", "distancia_m"]

mc2:                             # Matriz de caminos con checkpoints (MC2)
  habilitado: true
  sample_pct: 0.8                # top 80% viajes representativos
  checkpoints:
    campo_id: "checkpoint_id"
    campo_geom: "geometry"
  k_rutas: 3
  estrategia: "constrained"      # constrained | k-shortest
  campos_salida: ["origen", "destino", "tiempo_seg", "distancia_m", "checkpoint_id"]
